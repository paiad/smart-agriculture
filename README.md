# æ™ºæ…§å†œä¸šç‰©è”ç½‘ç®¡ç†ç³»ç»Ÿ

åŸºäº Spring Boot 3 + Vue 3 çš„æ™ºæ…§å†œä¸š IoT å¹³å°ï¼Œæ”¯æŒè®¾å¤‡ç®¡ç†ã€ç¯å¢ƒç›‘æµ‹ã€å‘Šè­¦è§„åˆ™ã€è¿œç¨‹æ§åˆ¶ç­‰åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **å®æ—¶ç›‘æ§**ï¼šå®æ—¶é‡‡é›†å’Œå±•ç¤ºå†œä¸šç¯å¢ƒæ•°æ®ï¼ˆæ¸©åº¦ã€æ¹¿åº¦ã€å…‰ç…§ã€åœŸå£¤ç­‰ï¼‰
- **è®¾å¤‡ç®¡ç†**ï¼šè®¾å¤‡æ³¨å†Œã€åœ¨çº¿çŠ¶æ€æ£€æµ‹ã€å¿ƒè·³ä¿æ´»
- **å‘Šè­¦ç³»ç»Ÿ**ï¼šçµæ´»çš„è§„åˆ™é…ç½®ï¼Œæ”¯æŒé˜ˆå€¼å‘Šè­¦å’Œå®æ—¶é€šçŸ¥
- **è¿œç¨‹æ§åˆ¶**ï¼šé€šè¿‡ MQTT ä¸‹å‘æ§åˆ¶æŒ‡ä»¤ï¼Œæ”¯æŒ ACK ç¡®è®¤æœºåˆ¶
- **æ•°æ®å¯è§†åŒ–**ï¼šåŸºäº ECharts çš„æ—¶åºæ•°æ®å›¾è¡¨å±•ç¤º

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯ (Backend)

| æŠ€æœ¯         | ç‰ˆæœ¬  | è¯´æ˜                     |
| ------------ | ----- | ------------------------ |
| Java         | 21    | è¯­è¨€                     |
| Spring Boot  | 3.3.6 | æ ¸å¿ƒæ¡†æ¶                 |
| MyBatis-Plus | -     | ORM æ¡†æ¶                 |
| MySQL        | 8.0   | å…³ç³»å‹æ•°æ®åº“             |
| Redis        | -     | ç¼“å­˜ & å‘Šè­¦è§„åˆ™å­˜å‚¨      |
| MQTT (EMQX)  | -     | ç‰©è”ç½‘æ¶ˆæ¯é€šä¿¡           |
| JWT          | -     | èº«ä»½è®¤è¯ (æ‰‹æœºå· + å¯†ç ) |
| Knife4j      | -     | API æ–‡æ¡£                 |

### å‰ç«¯ (Frontend)

| æŠ€æœ¯         | ç‰ˆæœ¬ | è¯´æ˜       |
| ------------ | ---- | ---------- |
| Vue          | 3.5  | æ¸è¿›å¼æ¡†æ¶ |
| Vite         | 7.x  | æ„å»ºå·¥å…·   |
| TypeScript   | 5.9  | ç±»å‹å®‰å…¨   |
| Element Plus | 2.13 | UI ç»„ä»¶åº“  |
| ECharts      | 6.0  | å›¾è¡¨åº“     |
| Pinia        | 3.0  | çŠ¶æ€ç®¡ç†   |
| UnoCSS       | -    | åŸå­åŒ– CSS |

## ğŸ“ é¡¹ç›®ç»“æ„

```
smart-agriculture/
â”œâ”€â”€ backend/                          # åç«¯æœåŠ¡
â”‚   â””â”€â”€ src/main/java/com/paiad/smartagriculture/
â”‚       â”œâ”€â”€ common/                   # å…¬å…±ç»„ä»¶ (Result, Utils, Constants)
â”‚       â”œâ”€â”€ config/                   # å…¨å±€é…ç½® (Redis, MQTT, OpenAPI)
â”‚       â”œâ”€â”€ controller/               # REST API æ¥å£
â”‚       â”‚   â”œâ”€â”€ UserController        # ç”¨æˆ·è®¤è¯
â”‚       â”‚   â”œâ”€â”€ DeviceController      # è®¾å¤‡ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ EnvDataController     # ç¯å¢ƒæ•°æ®
â”‚       â”‚   â”œâ”€â”€ AlarmController       # å‘Šè­¦ä¸­å¿ƒ
â”‚       â”‚   â”œâ”€â”€ AlarmRuleController   # å‘Šè­¦è§„åˆ™
â”‚       â”‚   â””â”€â”€ ControlCommandController  # è¿œç¨‹æ§åˆ¶
â”‚       â”œâ”€â”€ service/                  # ä¸šåŠ¡é€»è¾‘å±‚
â”‚       â”œâ”€â”€ mapper/                   # æ•°æ®è®¿é—®å±‚
â”‚       â”œâ”€â”€ model/                    # å®ä½“å¯¹è±¡ (Entity, DTO, VO)
â”‚       â”œâ”€â”€ handler/                  # å…¨å±€å¼‚å¸¸å¤„ç†
â”‚       â””â”€â”€ task/                     # å®šæ—¶ä»»åŠ¡ (è®¾å¤‡ç¦»çº¿æ£€æµ‹)
â”‚
â””â”€â”€ frontend/                         # å‰ç«¯åº”ç”¨
    â””â”€â”€ src/
        â”œâ”€â”€ views/                    # é¡µé¢è§†å›¾
        â”‚   â”œâ”€â”€ Login.vue             # ç™»å½•é¡µ
        â”‚   â”œâ”€â”€ monitor/              # å®æ—¶ç›‘æ§
        â”‚   â”œâ”€â”€ device/               # è®¾å¤‡åˆ—è¡¨
        â”‚   â”œâ”€â”€ alarm/                # å‘Šè­¦ä¸­å¿ƒ
        â”‚   â”œâ”€â”€ rule/                 # å‘Šè­¦è§„åˆ™é…ç½®
        â”‚   â””â”€â”€ control/              # è®¾å¤‡æ§åˆ¶
        â”œâ”€â”€ api/                      # API è¯·æ±‚å°è£…
        â”œâ”€â”€ components/               # å…¬å…±ç»„ä»¶
        â”œâ”€â”€ layouts/                  # å¸ƒå±€ç»„ä»¶
        â”œâ”€â”€ router/                   # è·¯ç”±é…ç½®
        â””â”€â”€ styles/                   # å…¨å±€æ ·å¼
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- JDK 21+
- Node.js 18+
- MySQL 8.0
- Redis
- EMQX (MQTT Broker)

### åç«¯å¯åŠ¨

1. é…ç½® `backend/src/main/resources/application-dev.yml`ï¼š
   - MySQL è¿æ¥ä¿¡æ¯
   - Redis è¿æ¥ä¿¡æ¯ (å«å¯†ç )
   - MQTT Broker åœ°å€

2. å¯åŠ¨åº”ç”¨ï¼š

   ```bash
   cd backend
   mvn spring-boot:run
   ```

3. è®¿é—® API æ–‡æ¡£ï¼š`http://localhost:8080/doc.html`

### å‰ç«¯å¯åŠ¨

```bash
cd frontend
npm install
npm run dev
```

è®¿é—®åœ°å€ï¼š`http://localhost:5173`

## ğŸ“¡ MQTT Topic è§„èŒƒ

| Topic                        | è¯´æ˜          |
| ---------------------------- | ------------- |
| `smart-agri/data/{deviceId}` | è®¾å¤‡æ•°æ®ä¸ŠæŠ¥  |
| `smart-agri/cmd/{deviceId}`  | æ§åˆ¶æŒ‡ä»¤ä¸‹å‘  |
| `smart-agri/ack/{deviceId}`  | æŒ‡ä»¤ ACK ç¡®è®¤ |

## ğŸ“‹ å¼€å‘è®°å½•

è¯¦è§ [Task.md](./Task.md)

## ğŸ“„ License

MIT
